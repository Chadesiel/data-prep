<!--
  ~ ============================================================================
  ~
  ~  Copyright (C) 2006-2016 Talend Inc. - www.talend.com
  ~
  ~  This source code is available under agreement available at
  ~  https://github.com/Talend/data-prep/blob/master/LICENSE
  ~
  ~  You should have received a copy of the agreement
  ~  along with this program; if not, write to Talend SA
  ~  9 rue Pages 92150 Suresnes, France
  ~
  ~ ============================================================================
  -->

<div class="folders-modal-content">
    <div class="modal-title" translate-once="CHOOSE_PREPARATION_TO_APPLY"></div>
    <form>
        <div class="preparation-list">
            <div class="preparation"
                 ng-class="{'selected': candidate.selected}"
                 ng-repeat="candidate in $ctrl.state.playground.candidatePreparations track by $index"
                 ng-click="$ctrl.selectPreparation(candidate)">

                <div class="radiobox-picker">
                    <input type="radio" ng-model="candidate.selected" name="radio-prep-picker" ng-value="true" ng-change="$ctrl.selectPreparation(candidate)"/>
                </div>

                <div class="information">
                    <div>
                        <span class="title one-line" title="{{candidate.preparation.name}}">{{candidate.preparation.name}}</span>
                    </div>

                    <p class="description">
                        <span translate-once="OWNED_BY"></span> <span class="important" title="{{candidate.preparation.author}}" >{{candidate.preparation.author}}</span><br/>
                        <span translate-once="LAST_MODIFICATION"></span><span translate-once="COLON"></span>{{candidate.preparation.lastModificationDate | TDPMoment}}
                    </p>

                    <p class="details">
                        <span class="important name one-line" title="{{candidate.dataset.name}}">{{candidate.dataset.name}}</span>&nbsp;- {{candidate.dataset.records}} <span translate-once="ROWS"></span>
                    </p>
                    <p class="details">
                        <span class="important">{{candidate.preparation.steps.length - 1}}</span> <span class="important" translate-once="STEPS"></span> <span translate-once="RECIPE"></span>
                    </p>
                </div>

                <div class="actions">
                    <a class="favorite" data-icon="f" ng-class="{selected: candidate.preparation.favorite}" ng-click="angular.noop"></a>
                </div>
            </div>
        </div>

        <div class="new-preparation-name">
            <span translate-once="NEW_CANDIDATE_PREPARATION_NAME"></span>
            <input required
                   type="text"
                   ng-model="$ctrl.dataset.name"
                   id="new-preparation-name"/>
        </div>
        <div class="modal-buttons">
            <button type="button"
                    id="cancel-preparation-pick-btn"
                    class="talend-modal-close btn-secondary modal-secondary-button"
                    ng-disabled="$ctrl.isApplyingPreparation"
                    translate-once="CANCEL"
                    ng-click="$ctrl.stateService.updatePreparationPickerDisplay(false)">
            </button>

            <talend-button-loader
                    button-class="btn-primary modal-primary-button"
                    id="clone-ds-btn"
                    disable-condition="$ctrl.preparationPickerForm.$invalid || $ctrl.isApplyingPreparation"
                    loading="$ctrl.isApplyingPreparation"
                    loading-class="icon"
                    ng-click="$ctrl.applyPreparation()">
                <span translate-once="APPLY_PREPARATION"></span>
            </talend-button-loader>
        </div>
    </form>
</div>