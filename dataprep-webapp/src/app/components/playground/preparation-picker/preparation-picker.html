<!--
  ~ ============================================================================
  ~
  ~  Copyright (C) 2006-2016 Talend Inc. - www.talend.com
  ~
  ~  This source code is available under agreement available at
  ~  https://github.com/Talend/data-prep/blob/master/LICENSE
  ~
  ~  You should have received a copy of the agreement
  ~  along with this program; if not, write to Talend SA
  ~  9 rue Pages 92150 Suresnes, France
  ~
  ~ ============================================================================
  -->

<div class="folders-modal-content">
    <div class="modal-title" translate-once="CHOOSE_PREPARATION_TO_APPLY"></div>

    <span ng-if="$ctrl.isFetchingPreparations" class="fetching-spinner">
        <i data-icon="c" class="talend-button-loader-icon continuous-rotate icon"></i>
    </span>

    <span ng-if="!$ctrl.state.playground.candidatePreparations.length"
          translate-once="NO_COMPATIBLE_PREPARATIONS"
          translate-values="{name: $ctrl.datasetName}"
    ></span>

    <form name="$ctrl.preparationPickerForm">
        <div class="preparation-list">
            <div class="preparation"
                 ng-repeat="candidate in $ctrl.state.playground.candidatePreparations track by candidate.preparation.id"
                 ng-click="$ctrl.selectPreparation(candidate)">

                <div class="information">
                    <div>
                        <span class="title one-line" title="{{candidate.preparation.name}}">{{candidate.preparation.name}}</span>
                    </div>

                    <p class="description">
                        <span translate-once="OWNED_BY"></span> <span class="important"
                                                                      title="{{candidate.preparation.author}}">{{candidate.preparation.author}}</span><br/>
                        <span translate-once="LAST_MODIFICATION"></span><span translate-once="COLON"></span>{{candidate.preparation.lastModificationDate
                        | TDPMoment}}
                    </p>

                    <p class="details">
                        <span class="important name one-line" title="{{candidate.dataset.name}}">{{candidate.dataset.name}}</span>&nbsp;-
                        {{candidate.dataset.records}} <span translate-once="ROWS"></span>
                    </p>
                    <p class="details">
                        <span class="important">{{candidate.preparation.steps.length - 1}}</span> <span
                            class="important" translate-once="STEPS"></span> <span translate-once="RECIPE"></span>
                    </p>
                </div>

                <div class="actions">
                    <a class="favorite" data-icon="f" ng-class="{selected: candidate.preparation.favorite}"
                       ng-click="angular.noop"></a>
                </div>
            </div>
        </div>
    </form>
</div>