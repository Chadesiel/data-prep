<talend-button-dropdown close-on-select="true" on-open="onOpen()">
  <div class="dropdown-container">
    <button class="t-btn-primary" ng-click="exportCtrl.launchExport()">{{ ::'EXPORT' | translate }}</button>
    <button class="t-btn dropdown-button"></button>
    <ul class="dropdown-menu dropdown-select">
      <li ng-repeat="exportType in exportCtrl.exportTypes" ng-click="exportCtrl.launchExport(exportType)">{{exportType.id}}</li>
    </ul>
  </div>
</talend-button-dropdown>

<talend-modal fullscreen="false"
              state="exportCtrl.showExport"
              close-button="true">

    <div ng-repeat="parameter in exportCtrl.currentExportType.parameters">
      <p>{{::parameter.labelKey}}</p>
      <p>{{::parameter.name}}</p>
      <div ng-if="parameter.type == radio">
        <input ng-model="exportCtrl[parameter.name]" type="radio" value="{{::parameter.defaultValue}}"/>({{::parameter.defaultValue}})
        <input ng-repeat="parameterValue in parameter.values" ng-model="exportCtrl[parameter.name]" type="radio" value="{{::parameterValue}}">({{::parameterValue}})
      </div>
    </div>

    <p>{{ ::'CHOOSE_SEPARATOR' | translate }}</p>

    <input type="radio" ng-model="exportCtrl.csvSeparator" ng-value="';'"/>{{ :: 'SEPARATOR_SEMI_COLON' | translate }}
    (;)&emsp;
    <input type="radio" ng-model="exportCtrl.csvSeparator" ng-value="'&#09;'"/>{{ :: 'SEPARATOR_TAB' | translate }} (&emsp;)&emsp;
    <input type="radio" ng-model="exportCtrl.csvSeparator" ng-value="' '"/>{{ :: 'SEPARATOR_SPACE' | translate }} (&nbsp;)&emsp;
    <input type="radio" ng-model="exportCtrl.csvSeparator" ng-value="','"/>{{ :: 'SEPARATOR_COMMA' | translate }} (,)&emsp;

    <div class="modal-buttons">
        <button class="talend-modal-close t-btn-secondary modal-secondary-button">{{ ::'CANCEL' | translate }}</button>
        <button class="talend-modal-close t-btn-primary modal-primary-button" ng-click="exportCtrl.export('CSV')">{{ ::'EXPORT' | translate }}</button>
    </div>

    <form id="exportForm" target="_blank">
        <input type="hidden" name="csvSeparator" value="{{ exportCtrl.csvSeparator }}" data-save-param="true"/>
        <input type="hidden" name="preparationId" value="{{ exportCtrl.preparationId }}" />
        <input type="hidden" name="stepId" value="{{ exportCtrl.stepId }}" />
        <input type="hidden" name="datasetId" value="{{ exportCtrl.datasetId }}" />
        <input type="hidden" name="exportType" />
    </form>

</talend-modal>